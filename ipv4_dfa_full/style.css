  :root{
    --bg:#fbfcfe; --muted:#556779;
    --cyan:#06b6d4; --cyan-dim:#d6fbff;
    --green:#16a34a; --red:#ef4444; --dash:#bfcbd6;
    --step-ms:600;
  }
  *{box-sizing:border-box}
  body{
    font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:var(--bg); color:#0f172a; margin:16px;
  }
  header{display:flex;align-items:baseline;gap:12px;flex-wrap:wrap}
  h1{margin:0;font-size:20px}
  .sub{color:var(--muted);margin-top:0;font-size:13px}

  .controls{display:flex;gap:8px;align-items:center;margin-top:12px;flex-wrap:wrap}
  input[type="text"]{padding:8px 10px;border-radius:8px;border:1px solid #dbe7ef;font-size:14px;width:340px}
  button{padding:8px 12px;border-radius:8px;border:1px solid #cbd7e2;background:white;cursor:pointer;font-weight:600}
  button.primary{background:var(--cyan);color:white;border-color:var(--cyan)}
  label{font-size:13px;color:var(--muted);display:flex;align-items:center;gap:6px}

  .layout{display:flex;gap:18px;margin-top:14px;align-items:flex-start}
  .viz{width:880px;height:520px;background:white;border-radius:10px;border:1px solid #e6eef8;padding:12px;position:relative;box-shadow:0 8px 26px rgba(2,6,23,0.06)}
  .trace{flex:1;max-height:520px;background:white;border-radius:10px;border:1px solid #e6eef8;padding:12px;overflow:auto;font-family:ui-monospace,monospace;font-size:13px}
  .trace .hdr{font-weight:700;margin-bottom:8px}
  .trace .line{padding:6px;border-radius:6px}
  .trace .current{background:linear-gradient(90deg, rgba(6,182,212,0.08), rgba(6,182,212,0.02));border-left:3px solid rgba(6,182,212,0.22)}
  .trace .ok{color:var(--green);font-weight:700}
  .trace .err{color:var(--red);font-weight:700}
  .trace .info{color:var(--muted)}
  .info {display:flex;gap:12px;margin-top:10px;flex-wrap:wrap}
  .badge{background:#f0f8fb;padding:6px 8px;border-radius:8px;color:var(--ink);font-weight:600}

  svg{width:100%;height:100%}
  .node circle, .node ellipse, .node rect { stroke:#334155; stroke-width:1.6; fill:#fff; transition:all .18s ease; }
  .node text{font-size:14px;user-select:none;pointer-events:none}
  .node.active circle, .node.active ellipse { fill:var(--cyan-dim); stroke:var(--cyan); stroke-width:3; filter: drop-shadow(0 10px 30px rgba(6,182,212,0.12)); }
  .node.pulse circle { animation: pulseNode var(--step-ms) linear; }
  @keyframes pulseNode { 0%{transform:scale(1)}50%{transform:scale(1.08)}100%{transform:scale(1)} }

  .node.accept ellipse { stroke:var(--green); stroke-width:3; fill:#eaffef; }
  .node.dead rect { stroke:var(--red); stroke-width:3; fill:#ffecec; }
  .node.dead.flash rect { animation: flashDead var(--step-ms) ease; }
  @keyframes flashDead { 0%{fill:#fff0f0}30%{fill:#ffbdbd}100%{fill:#ffecec} }

  .arrow { stroke:#475569; stroke-width:1.6; fill:none; marker-end:url(#arrowhead); transition: stroke .18s, stroke-width .18s; }
  .arrow.active { stroke:var(--cyan); stroke-width:3; filter: drop-shadow(0 8px 18px rgba(6,182,212,0.18)); }
  .arrow.invalid { stroke-dasharray:6 6; stroke:var(--dash); opacity:0.9; }
  .arrow-label{font-family:ui-monospace,monospace;font-size:12px;fill:#334155;text-anchor:middle}

  .glow { fill:var(--cyan); filter: drop-shadow(0 0 12px rgba(6,182,212,0.6)); opacity:0; transition:opacity .08s; }

  @media (max-width:1100px) {
    .layout{flex-direction:column;align-items:center}
    .viz{width:94%;height:420px}
    .trace{width:94%;max-height:320px}
  }
